#
https://learncloudnative.com/blog/2019-12-04-setup_ssl_certs_with_istio_gateway_part_i
#
export DOMAIN_NAME=ctv0.in
##
create the root certificate ($DOMAIN_NAME.crt) and the private key used for signing the certificate ($DOMAIN_NAME.key)
#
openssl req -x509 -sha256 -nodes -days 365 -newkey rsa:2048 -subj '/O=$DOMAIN_NAME Inc./CN=$DOMAIN_NAME' -keyout $DOMAIN_NAME.key -out $DOMAIN_NAME.crt
##
create private key
#
openssl req -out helloworld.$DOMAIN_NAME.csr -newkey rsa:2048 -nodes -keyout helloworld.$DOMAIN_NAME.key -subj "/CN=helloworld.$DOMAIN_NAME/O=hello world from $DOMAIN_NAME"
##
create certificate
#
openssl x509 -req -days 365 -CA $DOMAIN_NAME.crt -CAkey $DOMAIN_NAME.key -set_serial 0 -in helloworld.$DOMAIN_NAME.csr -out helloworld.$DOMAIN_NAME.crt
##
create k8s secret
#
kubectl create secret tls httpbin-tls-secret -n istio-ingress --key helloworld.$DOMAIN_NAME.key --cert helloworld.$DOMAIN_NAME.crt

